{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "COMMAND=$(echo \"$CLAUDE_TOOL_INPUT\" | jq -r '.command' 2>/dev/null); if echo \"$COMMAND\" | grep -q '^git commit'; then echo 'ðŸ” æª¢æŸ¥ Git æäº¤æ ¼å¼...'; if ! echo \"$COMMAND\" | grep -qE '\\[20[0-9]{6}\\]'; then echo 'âŒ æäº¤æ ¼å¼éŒ¯èª¤ï¼šå¿…é ˆåŒ…å« [YYYYMMDD] æ ¼å¼' >&2; exit 1; fi; if echo \"$COMMAND\" | grep -qiE '(AI|Claude|Anthropic|LLM|æ©Ÿå™¨äºº|è‡ªå‹•ç”Ÿæˆ|Generated|Automated|Bot|Assistant|ðŸ¤–)'; then echo 'âŒ æäº¤è¨Šæ¯åŒ…å«ç¦æ­¢è©žå½™' >&2; exit 1; fi; echo 'âœ… Git æäº¤æ ¼å¼æª¢æŸ¥é€šéŽ'; fi; if echo \"$COMMAND\" | grep -qE 'ln -s'; then echo 'âŒ é¿å…å‰µå»ºç¬¦è™Ÿé€£çµï¼šGoogle Drive åŒæ­¥è¡çª' >&2; exit 1; fi"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "COMMAND=$(echo \"$CLAUDE_TOOL_INPUT\" | jq -r '.command' 2>/dev/null); if echo \"$COMMAND\" | grep -qE '^git (add|commit|push|pull|merge)'; then if [ -d \"memories/logs\" ]; then echo \"$(date '+%Y-%m-%d %H:%M:%S') | Git æ“ä½œ: $COMMAND\" >> memories/logs/git_operations_$(date +%Y%m).log; fi; fi"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "if [ -d \"memories\" ]; then mkdir -p memories/logs memories/short_term && SESSION_INFO=\"$(date '+%Y-%m-%d %H:%M:%S') | å·¥ä½œç›®éŒ„: $(pwd) | ç•¶å‰åˆ†æ”¯: $(git branch --show-current 2>/dev/null || echo 'N/A')\"; echo \"$SESSION_INFO\" >> memories/logs/sessions_$(date +%Y%m).log; if [ -f .pdca/current_task.json ]; then TASK=$(jq -r '.task' .pdca/current_task.json 2>/dev/null || echo 'æœªçŸ¥ä»»å‹™'); echo 'ðŸ“ åµæ¸¬åˆ° PDCA ä»»å‹™ï¼Œå•Ÿå‹•è¨˜éŒ„ä»£ç†åˆ†æž...' && echo \"# PDCA ä»»å‹™è¨˜éŒ„ - $(date '+%Y-%m-%d %H:%M:%S')\\n\\n## ä»»å‹™ï¼š$TASK\\n\\nè«‹ä½¿ç”¨ 'claude -p \\\"pdca-recorder åˆ†æž $TASK çš„åŸ·è¡ŒéŽç¨‹ä¸¦åˆ†é¡žè¨˜éŒ„åˆ° memories/\\\"' ä¾†ç”Ÿæˆè©³ç´°è¨˜éŒ„ã€‚\" > memories/short_term/last_session.md; else echo -e \"# æœ€å¾Œæœƒè©±è¨˜éŒ„\\n\\n- **æœ€å¾Œå·¥ä½œæ™‚é–“**: $(date '+%Y-%m-%d %H:%M:%S')\\n- **æœ€å¾Œå·¥ä½œç›®éŒ„**: $(pwd)\\n- **æœ€å¾Œ Git åˆ†æ”¯**: $(git branch --show-current 2>/dev/null || echo 'N/A')\\n- **å°ˆæ¡ˆåç¨±**: $(basename $(pwd))\" > memories/short_term/last_session.md; fi && echo 'ðŸ”„ è¨˜æ†¶é«”ç³»çµ±å·²æ›´æ–°'; fi"
          }
        ]
      }
    ]
  }
}