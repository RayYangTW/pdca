---
allowed-tools: "*"
description: PDCA 專家模式 - 完全權限（高風險）
---

# 🔴 PDCA 專家模式執行

## 載入任務
當前任務：!`cat .pdca/current-task.txt 2>/dev/null || echo "未找到任務檔案"`

## ⚠️ 危險警告

### 🚨 **重要安全提醒**

您即將以 **完全權限** 啟動 5 個 AI 代理！

#### 潛在風險：
- ❌ **檔案刪除**：代理可能刪除重要檔案
- ❌ **系統修改**：可能更改系統設定
- ❌ **網路操作**：可能存取外部資源
- ❌ **套件安裝**：可能安裝未知軟體
- ❌ **權限提升**：可能執行 sudo 命令

#### 建議防護措施：
1. **✅ 完整備份**：確保所有重要資料已備份
2. **✅ 隔離環境**：建議在 Docker 容器或虛擬機中執行
3. **✅ 版本控制**：確保程式碼已提交到 Git
4. **✅ 監控執行**：密切監視代理的操作
5. **✅ 快速中止**：準備好隨時停止系統

## 🔍 環境安全檢查

### 當前環境評估
- **工作目錄**：!`pwd`
- **Git 狀態**：!`git status --short 2>/dev/null | wc -l | xargs echo "未提交變更:"`
- **備份狀態**：!`[ -d .git ] && echo "✅ Git 倉庫" || echo "❌ 無版本控制"`
- **容器檢測**：!`[ -f /.dockerenv ] && echo "✅ Docker 容器內" || echo "⚠️ 主機系統上"`

### 風險評估
!`cat > .pdca/risk-assessment.md << 'EOF'
# 專家模式風險評估

## 環境風險
- 執行環境: $([ -f /.dockerenv ] && echo "Docker 容器" || echo "主機系統")
- Git 保護: $([ -d .git ] && echo "有版本控制" || echo "無版本控制")
- 備份狀態: 請手動確認

## 任務風險
- 任務內容: $(cat .pdca/current-task.txt)
- 評估時間: $(date '+%Y-%m-%d %H:%M:%S')

## 建議
在非隔離環境下使用專家模式存在高風險，建議：
1. 切換到安全模式或標準模式
2. 使用 Docker 容器
3. 確保完整備份

EOF`

## 🛡️ 二次確認機制

### ⚠️ 請仔細閱讀並確認

如果您：
- ✅ 已經完整備份所有重要資料
- ✅ 理解可能的風險和後果  
- ✅ 在安全的隔離環境中執行
- ✅ 確實需要完全權限才能完成任務

**那麼請執行以下指令來最終確認**：

```
/pdca:expert-confirm
```

### 🔄 替代方案

如果您不確定是否需要專家模式，建議：

1. **🟡 標準模式**：`/pdca:standard` - 可以處理大部分開發任務
2. **🟢 安全模式**：`/pdca:safe` - 先分析任務需求
3. **🔧 自定義模式**：`/pdca:custom` - 精確控制權限

## 📊 專家模式能力

如果確認啟動，專家模式將提供：

### 🎯 Plan 代理（規劃師）
- **完全分析權限**：存取所有檔案和系統資訊
- **環境檢測**：完整的系統環境分析
- **資源評估**：網路、硬體、軟體資源

### 🎨 Do 代理（執行者）
- **完全實作權限**：創建、修改、刪除任何檔案
- **套件管理**：安裝、更新、移除依賴
- **系統配置**：修改配置檔和環境設定

### 🔍 Check 代理（檢查員）
- **完全測試權限**：執行任何測試和檢查
- **系統驗證**：深度系統狀態檢查
- **安全掃描**：完整的安全性檢查

### 🚀 Act 代理（改善者）
- **完全優化權限**：系統級性能優化
- **部署操作**：完整的部署和發布流程
- **維護操作**：系統維護和清理

### 📝 Knowledge 代理（知識管理）
- **完全記錄權限**：記錄所有操作和決策
- **系統文檔**：生成完整的系統文檔
- **audit 日誌**：詳細的操作審計記錄

---

## 📝 警告記錄

!`echo "⚠️ 專家模式警告 - $(date '+%Y-%m-%d %H:%M:%S') - 用戶查看專家模式警告" >> .pdca/execution-log.txt`

**請謹慎考慮是否真的需要專家模式。大部分任務使用標準模式就足夠了。**

---

## 🚨 緊急停止

如果系統啟動後需要緊急停止：

```bash
# 停止所有 PDCA 代理
pdca stop

# 或直接終止 tmux session
tmux kill-session -t pdca
```

**記住：預防勝於治療。如有疑慮，請選擇更安全的執行模式。**