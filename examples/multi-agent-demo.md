# PDCA 多代理系統示範

## 系統架構概覽

```
┌─────────────────────────────────────────────────────────┐
│                   主 Claude CLI (協調者)                    │
│                 您在這裡下達任務和監控進度                      │
└─────────────┬───────────────────────────┬─────────────────┘
              │      通過檔案系統 IPC        │
  ┌───────────┴──────────┬────────────────┴──────────┐
  │                      │                           │
┌─▼────────┐    ┌────────▼──┐    ┌─────────────┐   ┌─▼──────────┐
│ Plan 代理 │    │  Do 代理   │    │ Check 代理  │   │ Act 代理   │
│  規劃師   │    │   執行者    │    │   檢查員    │   │   改善者   │
└───────────┘    └───────────┘    └────────────┘   └───────────┘
                            │
                      ┌─────▼─────┐
                      │Knowledge代理│
                      │  知識管理   │
                      └───────────┘
```

## 使用流程示範

### 1. 啟動系統

在 Claude Code CLI 中：
```
/pdca:start
```

系統回應：
```
🚀 正在啟動 PDCA 多代理系統...
這將啟動 5 個獨立的 Claude CLI 實例進行並行工作

✅ PDCA 多代理系統已啟動！
══════════════════════════════════════════════════

📋 系統資訊:
  • 5 個 Claude CLI 代理 正在並行運行
  • 檔案系統 IPC 用於代理間通訊
  • 即時監控 可追蹤所有代理狀態

🎯 請告訴我您的任務，我將協調團隊為您工作！
```

### 2. 分配任務

用戶輸入：
```
實作一個簡單的待辦事項管理 API
```

協調者回應：
```
📝 收到任務: "實作一個簡單的待辦事項管理 API"
正在分析並分配給各代理...

✅ 任務已分配給代理團隊

📊 [plan] [████                ] 20%
   [整體進度] [████                ] 20%

[14:23:15] 📨 coordinator → plan: TASK_ASSIGN
```

### 3. 代理協作過程

隨著時間推移，您會看到：

```
📊 [plan] [████████████        ] 60%
   [整體進度] [████████            ] 40%

✅ plan 完成報告:
   已完成需求分析和架構設計，定義了 RESTful API 規範

📊 [do] [████                ] 20%
   [整體進度] [████████████        ] 60%

[14:25:32] 📨 plan → do: RESULT_REPORT
[14:25:33] 📨 coordinator → do: TASK_ASSIGN
```

### 4. 查看狀態

使用 `/pdca:status` 查看詳細狀態：
```
📊 PDCA 系統狀態

🔍 檢查系統狀態
pdca: 5 windows (created Mon Jan 8 14:23:00 2025)

代理窗口狀態
0: plan* (1 panes) [80x24]
1: do (1 panes) [80x24]
2: check (1 panes) [80x24]
3: act (1 panes) [80x24]
4: knowledge (1 panes) [80x24]
5: monitor (1 panes) [80x24]
```

### 5. 監控進度

使用 `/pdca:monitor` 開啟 TUI 監控介面：
```
┌─ PDCA 監控介面 ─────────────────────────────────┐
│                                                │
│ 代理狀態:                                       │
│ ├─ Plan     [████████████████] 100% ✓         │
│ ├─ Do       [████████████    ]  75% ↻         │
│ ├─ Check    [████            ]  25% ↻         │
│ ├─ Act      [                ]   0% ⏸         │
│ └─ Knowledge[████████████████] 100% ✓         │
│                                                │
│ 訊息流量: 15 sent | 12 received | 3 pending   │
│                                                │
│ 最新活動:                                       │
│ • Do: 實作 POST /todos 端點                     │
│ • Check: 等待 Do 完成實作                       │
│ • Knowledge: 記錄 API 設計決策                  │
└────────────────────────────────────────────────┘
```

### 6. 直接與代理互動

切換到特定代理視窗：
```bash
tmux attach -t pdca
# 然後按 Ctrl+B 1 切換到 Do 代理
```

您會看到 Do 代理的 Claude CLI：
```
Claude> 我正在實作待辦事項 API...

目前進度：
✓ 建立專案結構
✓ 設置 Express 伺服器
✓ 定義資料模型
↻ 實作 CRUD 端點
  - POST /todos
  - GET /todos
  - PUT /todos/:id
  - DELETE /todos/:id
```

### 7. 任務完成

最終，協調者會整合所有結果：
```
✅ 任務完成！

📋 總結報告：
• Plan: 完成需求分析和 API 設計
• Do: 實作所有 CRUD 端點和錯誤處理
• Check: 通過所有單元測試和整合測試
• Act: 優化查詢效能，添加快取機制
• Knowledge: 更新專案文檔和 API 規範

📁 產出檔案：
• src/app.js - Express 應用程式
• src/routes/todos.js - 路由處理
• src/models/todo.js - 資料模型
• tests/todos.test.js - 測試套件
• docs/api.md - API 文檔
• README.md - 使用說明

🎉 待辦事項管理 API 已成功實作！
```

## 進階功能

### 中途介入
如果需要修改方向或提供額外資訊：
```
等等，請確保 API 支援分頁功能
```

協調者會立即將新需求傳遞給相關代理。

### 錯誤處理
如果某個代理遇到問題：
```
❌ 錯誤報告 (do):
   無法連接到資料庫，請檢查配置

🆘 do 請求協助
```

您可以提供幫助或讓其他代理協助解決。

### 知識累積
Knowledge 代理會自動整理經驗：
```
📝 新增知識條目：
• 解決方案：使用 MongoDB 作為待辦事項存儲
• 最佳實踐：API 版本控制策略
• 設計模式：RESTful 錯誤處理規範
```

## 總結

PDCA 多代理系統透過 5 個專門的 Claude CLI 實例，實現了真正的並行開發工作流程。每個代理都有明確的職責，透過檔案系統進行非同步通訊，而您作為協調者可以輕鬆管理整個開發過程。

這種架構特別適合：
- 複雜的功能開發
- 需要多角度分析的問題
- 大型重構專案
- 需要持續改進的系統